# ç¬¬å››éƒ¨åˆ†ï¼šç•«å‡ºè«–æ–‡ç­‰ç´šçš„åœ–

æœ¬éƒ¨åˆ†é è¨ˆæ™‚é–“ï¼š40 åˆ†é˜

## ä»»å‹™ 15ï¼šç¬¬ä¸€å€‹ç›’ç‹€åœ–

ğŸ“‹ **è¤‡è£½é€™æ®µè©±ï¼Œè²¼çµ¦ AIï¼š**

> æˆ‘æœ‰ä¸€å€‹è³‡æ–™æ¡† `my_data`ï¼Œè£¡é¢æœ‰ treatmentï¼ˆA æˆ– B å…©çµ„ï¼‰å’Œ losï¼ˆä½é™¢å¤©æ•¸ï¼‰ã€‚è«‹ç”¨ ggplot2 ç•«ä¸€å€‹ç›’ç‹€åœ–ï¼Œæ¯”è¼ƒå…©çµ„çš„ä½é™¢å¤©æ•¸åˆ†ä½ˆã€‚

### åŸºæœ¬ç›’ç‹€åœ–

```{r}
#| label: boxplot-basic
#| echo: true
#| message: false
#| warning: false

library(ggplot2)

# è®€å–è³‡æ–™
my_data <- read.csv("patient_data.csv")

# ç•«åŸºæœ¬ç›’ç‹€åœ–
ggplot(my_data, aes(x = treatment, y = los)) +
  geom_boxplot()
```

## ä»»å‹™ 16ï¼šè®“åœ–è®Šå°ˆæ¥­

ğŸ“‹ **è¤‡è£½é€™æ®µè©±ï¼Œè²¼çµ¦ AIï¼š**

> è«‹å¹«æˆ‘ç¾åŒ–é€™å€‹ç›’ç‹€åœ–ï¼š
> 
> 1. åŠ ä¸Šæ¨™é¡Œã€Œå…©çµ„æ²»ç™‚çš„ä½é™¢å¤©æ•¸æ¯”è¼ƒã€
> 2. X è»¸æ¨™ç±¤æ”¹æˆã€Œæ²»ç™‚çµ„åˆ¥ã€ï¼ŒY è»¸æ”¹æˆã€Œä½é™¢å¤©æ•¸ï¼ˆå¤©ï¼‰ã€
> 3. å…©çµ„ç”¨ä¸åŒé¡è‰²ï¼ˆè—è‰²å’Œæ©˜è‰²ï¼‰
> 4. ä½¿ç”¨ç°¡æ½”çš„ä¸»é¡Œé¢¨æ ¼
> 5. ä¸è¦é¡¯ç¤ºåœ–ä¾‹ï¼ˆå› ç‚º X è»¸å·²ç¶“èªªæ˜äº†ï¼‰

### å°ˆæ¥­åŒ–ç›’ç‹€åœ–

```{r}
#| label: boxplot-professional
#| echo: true
#| message: false
#| warning: false

# ç•«å°ˆæ¥­çš„ç›’ç‹€åœ–
ggplot(my_data, aes(x = treatment, y = los, fill = treatment)) +
  geom_boxplot() +
  scale_fill_manual(values = c("A" = "steelblue", "B" = "darkorange")) +
  labs(
    title = "å…©çµ„æ²»ç™‚çš„ä½é™¢å¤©æ•¸æ¯”è¼ƒ",
    x = "æ²»ç™‚çµ„åˆ¥",
    y = "ä½é™¢å¤©æ•¸ï¼ˆå¤©ï¼‰"
  ) +
  theme_minimal() +
  theme(
    legend.position = "none",
    plot.title = element_text(size = 14, face = "bold", hjust = 0.5)
  )
```

## ä»»å‹™ 17ï¼šåŠ ä¸Šè³‡æ–™é»

ğŸ“‹ **è¤‡è£½é€™æ®µè©±ï¼Œè²¼çµ¦ AIï¼š**

> æˆ‘æƒ³åœ¨ç›’ç‹€åœ–ä¸Šé¢ç–ŠåŠ å€‹åˆ¥çš„è³‡æ–™é»ï¼Œè®“è®€è€…å¯ä»¥çœ‹åˆ°å¯¦éš›çš„åˆ†ä½ˆã€‚ä½†è³‡æ–™é»ä¸è¦å®Œå…¨é‡ç–Šï¼Œè¦æœ‰ä¸€é»æ°´å¹³çš„éš¨æ©Ÿæ•£é–‹ã€‚è«‹ä¿®æ”¹ç¨‹å¼ç¢¼ã€‚

### åŠ å…¥è³‡æ–™é»çš„ç›’ç‹€åœ–

```{r}
#| label: boxplot-with-points
#| echo: true
#| message: false
#| warning: false

# ç›’ç‹€åœ–åŠ ä¸Šè³‡æ–™é»
ggplot(my_data, aes(x = treatment, y = los, fill = treatment)) +
  geom_boxplot(alpha = 0.7) +
  geom_jitter(width = 0.2, alpha = 0.5, size = 2) +
  scale_fill_manual(values = c("A" = "steelblue", "B" = "darkorange")) +
  labs(
    title = "å…©çµ„æ²»ç™‚çš„ä½é™¢å¤©æ•¸æ¯”è¼ƒ",
    x = "æ²»ç™‚çµ„åˆ¥",
    y = "ä½é™¢å¤©æ•¸ï¼ˆå¤©ï¼‰"
  ) +
  theme_minimal() +
  theme(
    legend.position = "none",
    plot.title = element_text(size = 14, face = "bold", hjust = 0.5)
  )
```

## ä»»å‹™ 18ï¼šå…¶ä»–é¡å‹çš„åœ–

### é¸é … Aï¼šé•·æ¢åœ–

```{r}
#| label: barplot
#| echo: true
#| message: false
#| warning: false

# æ€§åˆ¥åˆ†ä½ˆé•·æ¢åœ–
ggplot(my_data, aes(x = gender, fill = gender)) +
  geom_bar() +
  scale_fill_manual(values = c("M" = "lightblue", "F" = "pink")) +
  labs(
    title = "æ€§åˆ¥åˆ†ä½ˆ",
    x = "æ€§åˆ¥",
    y = "äººæ•¸"
  ) +
  theme_minimal() +
  theme(legend.position = "none")
```

### é¸é … Bï¼šæ•£ä½ˆåœ–

```{r}
#| label: scatterplot
#| echo: true
#| message: false
#| warning: false

# å¹´é½¡èˆ‡ä½é™¢å¤©æ•¸æ•£ä½ˆåœ–
ggplot(my_data, aes(x = age, y = los, color = treatment)) +
  geom_point(size = 3, alpha = 0.6) +
  geom_smooth(method = "lm", se = TRUE) +
  scale_color_manual(values = c("A" = "steelblue", "B" = "darkorange")) +
  labs(
    title = "å¹´é½¡èˆ‡ä½é™¢å¤©æ•¸çš„é—œä¿‚",
    x = "å¹´é½¡ï¼ˆæ­²ï¼‰",
    y = "ä½é™¢å¤©æ•¸ï¼ˆå¤©ï¼‰",
    color = "æ²»ç™‚çµ„åˆ¥"
  ) +
  theme_minimal()
```

### é¸é … Cï¼šç›´æ–¹åœ–

```{r}
#| label: histogram
#| echo: true
#| message: false
#| warning: false

# ä½é™¢å¤©æ•¸åˆ†ä½ˆç›´æ–¹åœ–
ggplot(my_data, aes(x = los, fill = treatment)) +
  geom_histogram(binwidth = 2, alpha = 0.7, position = "dodge") +
  scale_fill_manual(values = c("A" = "steelblue", "B" = "darkorange")) +
  labs(
    title = "ä½é™¢å¤©æ•¸åˆ†ä½ˆ",
    x = "ä½é™¢å¤©æ•¸ï¼ˆå¤©ï¼‰",
    y = "äººæ•¸",
    fill = "æ²»ç™‚çµ„åˆ¥"
  ) +
  theme_minimal()
```

## ä»»å‹™ 19ï¼šå­˜æª”ä½ çš„åœ–

ğŸ“‹ **è¤‡è£½é€™æ®µè©±ï¼Œè²¼çµ¦ AIï¼š**

> æˆ‘ç•«å¥½äº†ä¸€å¼µ ggplot2 çš„åœ–ï¼Œæƒ³è¦å­˜æˆ PNG æª”æ¡ˆï¼Œè§£æåº¦è¦å¤ é«˜å¯ä»¥æ”¾åœ¨è«–æ–‡è£¡ï¼ˆ300 dpiï¼‰ï¼Œå¤§å°å¤§ç´„æ˜¯ 8 x 6 è‹±å‹ã€‚è«‹çµ¦æˆ‘å­˜æª”çš„ç¨‹å¼ç¢¼ã€‚

### å„²å­˜é«˜å“è³ªåœ–æª”

```{r}
#| label: save-plot
#| echo: true
#| eval: false

# å„²å­˜æœ€å¾Œç•«çš„åœ–
ggsave(
  filename = "boxplot_comparison.png",
  width = 8,
  height = 6,
  dpi = 300,
  units = "in"
)

print("åœ–è¡¨å·²æˆåŠŸå„²å­˜ç‚º boxplot_comparison.png")
```